#!/usr/bin/env ruby
# frozen_string_literal: true

require "fileutils"

APP_ROOT = File.expand_path("..", __dir__)

def say(message)
  puts "\e[32m==> #{message}\e[0m"
end

Dir.chdir(APP_ROOT) do
  say "Installing gems"
  system("bundle install") || abort("bundle install failed")

  say "Setting up database (create, migrate, seed)"
  system("bin/rails db:create db:migrate db:seed") || abort("database setup failed")

  say "Setup complete. Start the server with: bin/rails server"
end
